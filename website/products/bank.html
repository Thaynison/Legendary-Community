<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>.+* Legendary Community *+.</title>
  <link rel="stylesheet" href="../assets/css/bulma.min.css">
  <link rel="stylesheet" href="../assets/css/style.css">
  <link rel="icon" href="../assets/img/icon_server.png" type="image/png">
</head>

<body>

<header class="section">
  <div class="logo container">
    <a href="../index.html">
      <img src="../assets/img/logo.png">
    </a>
  </div>

  <div class="container">
    <nav class="navbar">
      <div class="navbar-brand">
        <a class="navbar-burger burger">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>
    
      <div class="navbar-menu">
        <div class="navbar-start">
          <a href="../index.html" class="navbar-item"><i class="fas fa-home"></i> Início</a>
          <a href="../regras.html" class="navbar-item"><i class="fas fa-book"></i> Regras</a>
          <a href="../votar.html" class="navbar-item"><i class="fas fa-vote-yea"></i> Votar</a>
          <!-- <a href="#" target="_blank" class="navbar-item"><i class="fas fa-comments"></i> Fórum</a> -->
           <!--  -->
           <div class="navbar-item has-dropdown is-hoverable">
            <a href="../modpack.html" class="navbar-item"><i class="fas fa-gamepad"></i> Modpack</a>
            <div class="navbar-dropdown">
              <a href="../modpack.html" class="navbar-item"><i class="fas fa-gamepad"></i> Modpacks</a>
              <a href="../launchers.html" class="navbar-item"><i class="fas fa-gamepad"></i> Launchers</a>
              <hr class="navbar-divider">
              <a href="../termos.html" class="navbar-item">Detalhes de Instalações</a>
            </div>
          </div>
          <!--  -->
          <div class="navbar-item has-dropdown is-hoverable">
            <a href="../loja.html" class="navbar-link"><i class="fas fa-shopping-cart"></i> Loja</a>
            <div class="navbar-dropdown">
              <a href="../loja.html#vip" class="navbar-item"><i class="fas fa-gem"></i> VIPs</a>
              <!-- <a href="loja.html#chave" class="navbar-item"><i class="fas fa-key"></i> Chaves</a> -->
              <a href="../loja.html#moedas" class="navbar-item"><i class="fas fa-coins"></i> Moedas</a>
              <a href="../loja.html#unban" class="navbar-item"><i class="fas fa-ban"></i> Unban</a>
              <hr class="navbar-divider">
              <a href="../termos.html" class="navbar-item">Informações importantes</a>
            </div>
          </div>
          <a href="https://discord.gg/DVA2hq4SaN" class="navbar-item"><i class="fab fa-discord"></i> Discord</a>
        </div>
    
        <div class="navbar-end">
          <a id="ip" class="navbar-item">
            <i class="fas fa-copy"></i> <span>legendarycommunity.com.br:25567</span>
            <textarea></textarea>
          </a>
        </div>
      </div>
    </nav>
  </div>
</header>

<main class="section">
  <div class="container">
    <div class="columns">
      <div class="column">
        <article class="article">
          <h1 class="article-title"><i class="fas fa-gem"></i> Bank</h1>
          <div class="article-content">
            <p><b>Vantagens</b></p>
            
            <ul class="list">
              <li><i class="fas fa-check"></i> Acesso vitalício ao comando BANK dentro do servidor</li>
            </ul>

          </div>
        </article>
      </div>
      
      <div class="column is-4">
        <article class="article produto-sidebar">
            <h1 class="article-title"><i class="fas fa-shopping-cart"></i> Adquirir agora</h1>
            <div class="article-content">
                <img src="../assets/img/bank.png">
                <h1 id="product-price">R$5,00</h1>
    
                <div class="field has-addons">
                    <div class="control is-fullwidth">
                        <input id="username-input" class="input" type="text" placeholder="Seu nome de usuário">
                    </div>
                    <div class="control">
                        <a id="buy-button" class="button is-success">
                            <span class="icon"><i class="fas fa-shopping-cart"></i></span>
                            <span>Comprar</span>
                        </a>
                    </div>
                </div>
            </div>
        </article>
      </div>

        <!-- Modal para confirmação de pagamento via Pix -->
        <div id="payment-modal" class="modal">
          <div class="modal-background"></div>
          <div class="modal-content">
              <div class="box">
                  <h2 class="title">Pagamento via Pix</h2>
                  <p>Para finalizar a compra, faça o pagamento via Pix e clique no botão abaixo para confirmar.</p>
                  <p><strong>Valor: R$5,00</strong></p>
                  <div id="qrcode" style="text-align: center; margin: 20px 0;"></div>
                  <button id="confirm-pix-button" class="button is-primary">Confirmar Pagamento</button>
                  <button id="cancel-pix-button" class="button is-light">Cancelar</button>
              </div>
          </div>
          <button class="modal-close is-large" aria-label="close"></button>
      </div>

      <!-- Modal para pagamento concluído -->
      <div id="payment-success-modal" class="modal">
          <div class="modal-background"></div>
          <div class="modal-content">
              <div class="box">
                  <h2 class="title">Pagamento Concluído!</h2>
                  <p>Seu pagamento foi recebido com sucesso.</p>
                  <button id="close-success-button" class="button is-primary">Fechar</button>
              </div>
          </div>
          <button class="modal-close is-large" aria-label="close"></button>
      </div>

    
    </div>
  </div>
</main>

<footer class="section">
  <div class="container">
    <article class="footer">
      <span>Legendary Community <script>document.write(new Date().getFullYear())</script> &copy; Todos os direitos reservados.</span>
      <a href="https://thaynison.vercel.app" target="_blank" class="is-muted"><i class="fas fa-tools"></i> Desenvolvido por Thaynison</a>
    </article>
  </div>
</footer>

<script src="assets/js/scripts.js"></script>
<script defer src="https://use.fontawesome.com/releases/v5.12.1/js/all.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.qrcode/1.0/jquery.qrcode.min.js"></script>

<script>
  document.getElementById("buy-button").addEventListener("click", function () {
      const username = "Usuario"; // Substitua por lógica para pegar o nome do usuário
      const productPrice = "5,00"; // Preço do produto
      const productName = "Produto Exemplo"; // Nome do produto
      window.orderDetails = { username, productPrice, productName };
      const pixData = `00020101021126330014br.gov.bcb.pix0111155209637895204000053039865802BR5920THAYNISON C DA SILVA6005SERRA62070503***630409EC`;
      $("#qrcode").empty();
      $("#qrcode").qrcode(pixData);
      document.getElementById("payment-modal").classList.add("is-active");
  });

  document.getElementById("confirm-pix-button").addEventListener("click", function () {
      const { username, productPrice, productName } = window.orderDetails;
      const uniqueCode = `#LC${Date.now()}`;
      const payload = {
          content: `Novo pedido recebido:\nUsuário: ${username}\nProduto: ${productName}\nPreço do produto: R$${productPrice}\nCódigo: ${uniqueCode}`
      };

      fetch('https://discordapp.com/api/webhooks/1298136495005237289/614_3sNwsdgBXF2pLValLhXZD5UCR_15wQc0PzFw3EGbHOQoRt3xyfUC4tBOOcHhrUC9', {
          method: 'POST',
          headers: {
              'Content-Type': 'application/json'
          },
          body: JSON.stringify(payload)
      })
      .then(response => {
          if (response.ok) {
              // alert("Pedido enviado com sucesso!");
              document.getElementById("payment-modal").classList.remove("is-active");
              // Mostre o modal de pagamento concluído
              document.getElementById("payment-success-modal").classList.add("is-active");
          } else {
              alert("Erro ao enviar o pedido.");
          }
      })
      .catch(error => {
          console.error("Erro:", error);
          alert("Erro ao enviar o pedido.");
      });
  });

  document.getElementById("cancel-pix-button").addEventListener("click", function () {
      document.getElementById("payment-modal").classList.remove("is-active");
  });

  // Fechar modal de pagamento concluído
  document.getElementById("close-success-button").addEventListener("click", function () {
      document.getElementById("payment-success-modal").classList.remove("is-active");
  });
</script>

<style>
  .modal {
      display: none;
      align-items: center;
      justify-content: center;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1000;
  }
  .modal.is-active {
      display: flex;
  }
</style>

</body>

</html>